input:
  opcuatrigger:
    endpoint: opc.tcp://172.16.14.211:49380
    tNodeIDs:
      - '{"1": [{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_DGM_Ireal", "group": "D007", "db": "mssql", "historian": "influx", "sqlSp":"MES_DCM_OPC_Benthos"}]}'
      - '{"2": [{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_DGM_Ireal", "group": "D021", "db": "mssql", "historian": "influx", "sqlSp":"MES_DCM_OPC_Benthos"}]}'
      - '{"3": [{"node": "ns=2;s=TwinCat.AFP-DC1.D010.Shot_Counter", "group": "D010", "db": "mssql", "historian": "influx", "sqlSp": "MES_DCM_OPC_Prod_Process_limits_benthos"}]}'    
    subscribeEnabled: true
    insecure: true
    tBatchNodeIDs:
      - '{"1": [{"node":"ns=2;s=Buhler-OPC-DA.D007.SVs.ab_ablauf.svABprocess.AB_T_GEPS02_MSOL_R","name": "reduce_solidification_time"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.ab_ablauf.svABprocess.AB_T_MSOL","name": "solidification"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess.PW_QUA_ATT_I","name": "quality_attribute"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_F_LCTR","name": "locking_force"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_L_B","name": "biscuit_thickness"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_P_IMMAX","name": "max_metalpress_PI_phase"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_P_M","name": "metal_pressure_s_CF"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_P_VACC1","name": "vacuum_pressure_1_s_CVac"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_P_VACC2","name": "vacuum_pressure_2_s_Cvac"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_S_PRE","name": "intensification_stroke"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_T_CYC","name": "cycle_time"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_T_F","name": "cavity_fill_time"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_T_SUM","name": "tot_press_build_up_time"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_Ist.PW_V_CF","name": "plunger_s_CF"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_L_B","name": "biscuit_thickness_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_P_IMMAX","name": "max_metalpress_PI_phase_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_P_M","name": "metal_pressure_s_CF_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_P_VACC1","name": "vacuum_pressure_1_s_Cvac_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_P_VACC2","name": "vacuum_pressure_2_s_Cvac_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_S_PRE","name": "intensification_stroke_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_T_F","name": "cavity_fill_time_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_T_SUM","name": "tot_press_build_up_time_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O.PW_V_CF","name": "plunger_s_CF_USL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_L_B","name": "biscuit_thickness_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_P_IMMAX","name": "max_metalpress_PI_phase_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_P_M","name": "metal_pressure_s_CF_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_P_VACC1","name": "vacuum_pressure_1_s_CVac_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_P_VACC2","name": "vacuum_pressure_2_s_CVac_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_S_PRE","name": "intensification_stroke_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_T_F","name": "cavity_fill_time_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_T_SUM","name": "tot_press_build_up_time_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_O2.PW_V_CF","name": "plunger_s_CF_UUSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U.PW_L_B","name": "biscuit_thickness_LSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U.PW_P_IMMAX","name": "max_metalpress_PI_phase_LSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U.PW_P_VACC1","name": "vacuum_pressure_1_s_CVac_LSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U.PW_P_VACC2","name": "vacuum_pressure_2_s_CVac_LSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U.PW_S_PRE","name": "intensification_stroke_LSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U.PW_T_F","name": "cavity_fill_time_LSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U.PW_T_SUM","name": "tot_press_build_up_time_LSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U.PW_V_CF","name": "plunger_s_CF_LSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U2.PW_L_B","name": "biscuit_thickness_LLSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U2.PW_P_IMMAX","name": "max_metalpress_PI_phase_LLSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U2.PW_P_VACC1","name": "vacuum_pressure_1_s_CVac_LLSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U2.PW_P_VACC2","name": "vacuum_pressure_2_s_CVac_LLSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U2.PW_S_PRE","name": "intensification_stroke_LLSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U2.PW_T_F","name": "cavity_fill_time_LLSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U2.PW_T_SUM","name": "tot_press_build_up_time_LLSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocess_U2.PW_V_CF","name": "plunger_s_CF_LLSL"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.pw_prozwert.svPWprocessOPC.PW10_STATE_DGM","name": "DGM_state"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.re_regler.svREprocessOPC.PE13_DS_PH2","name": "stroke_2nd_phase"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.re_regler.svREprocessOPC.PE13_S_PH2","name": "WP_begin_fast_shot"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.re_regler.svREprocessOPC.PE13_V_I_PH1","name": "average_veloc_1st_phase"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.re_regler.svREprocessOPC.PE13_V_I_PH2","name": "average_veloc_2nd_phase"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_DGM_I","name": "cycle_counter_DGM_total"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_DGM_Ireal","name": "cycle_counter_DGM_total_real"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_BAD_I","name": "BAD_cycle_counter_reject"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_CHK_I","name": "CHK_cycle_counter_reject"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_OK_I","name": "OK_cycle_counter_good_cast"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_OUT_I","name": "OUT_cycle_counter_reject"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_PS_I","name": "PS_cycle_counter_prod_start"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_TOT","name": "TOT_cycle_counter_total_Soll"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_TOT_I","name": "TOT_cycle_counter_total"},{"node": "ns=2;s=Buhler-OPC-DA.D007.SVs.zr_zaehler.svZRstates.ZRIO","name": "svZRstates"}]}'
      - '{"2": [{"node":"ns=2;s=Buhler-OPC.D021.APPL.ab_ablauf.svABprocess.AB_T_GEPS02_MSOL_R","name": "reduce_solidification_time"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.ab_ablauf.svABprocess.AB_T_MSOL","name": "solidification"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess.PW_QUA_ATT_I","name": "quality_attribute"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_F_LCTR","name": "locking_force"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_L_B","name": "biscuit_thickness"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_P_IMMAX","name": "max_metalpress_PI_phase"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_P_M","name": "metal_pressure_s_CF"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_P_VACC1","name": "vacuum_pressure_1_s_CVac"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_P_VACC2","name": "vacuum_pressure_2_s_Cvac"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_S_PRE","name": "intensification_stroke"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_T_CYC","name": "cycle_time"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_T_F","name": "cavity_fill_time"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_T_SUM","name": "tot_press_build_up_time"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_Ist.PW_V_CF","name": "plunger_s_CF"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_L_B","name": "biscuit_thickness_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_P_IMMAX","name": "max_metalpress_PI_phase_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_P_M","name": "metal_pressure_s_CF_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_P_VACC1","name": "vacuum_pressure_1_s_Cvac_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_P_VACC2","name": "vacuum_pressure_2_s_Cvac_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_S_PRE","name": "intensification_stroke_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_T_F","name": "cavity_fill_time_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_T_SUM","name": "tot_press_build_up_time_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O.PW_V_CF","name": "plunger_s_CF_USL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_L_B","name": "biscuit_thickness_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_P_IMMAX","name": "max_metalpress_PI_phase_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_P_M","name": "metal_pressure_s_CF_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_P_VACC1","name": "vacuum_pressure_1_s_CVac_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_P_VACC2","name": "vacuum_pressure_2_s_CVac_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_S_PRE","name": "intensification_stroke_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_T_F","name": "cavity_fill_time_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_T_SUM","name": "tot_press_build_up_time_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_O2.PW_V_CF","name": "plunger_s_CF_UUSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U.PW_L_B","name": "biscuit_thickness_LSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U.PW_P_IMMAX","name": "max_metalpress_PI_phase_LSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U.PW_P_VACC1","name": "vacuum_pressure_1_s_CVac_LSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U.PW_P_VACC2","name": "vacuum_pressure_2_s_CVac_LSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U.PW_S_PRE","name": "intensification_stroke_LSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U.PW_T_F","name": "cavity_fill_time_LSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U.PW_T_SUM","name": "tot_press_build_up_time_LSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U.PW_V_CF","name": "plunger_s_CF_LSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U2.PW_L_B","name": "biscuit_thickness_LLSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U2.PW_P_IMMAX","name": "max_metalpress_PI_phase_LLSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U2.PW_P_VACC1","name": "vacuum_pressure_1_s_CVac_LLSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U2.PW_P_VACC2","name": "vacuum_pressure_2_s_CVac_LLSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U2.PW_S_PRE","name": "intensification_stroke_LLSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U2.PW_T_F","name": "cavity_fill_time_LLSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U2.PW_T_SUM","name": "tot_press_build_up_time_LLSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocess_U2.PW_V_CF","name": "plunger_s_CF_LLSL"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.pw_prozwert.svPWprocessOPC.PW10_STATE_DGM","name": "DGM_state"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.re_regler.svREprocessOPC.PE13_DS_PH2","name": "stroke_2nd_phase"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.re_regler.svREprocessOPC.PE13_S_PH2","name": "WP_begin_fast_shot"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.re_regler.svREprocessOPC.PE13_V_I_PH1","name": "average_veloc_1st_phase"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.re_regler.svREprocessOPC.PE13_V_I_PH2","name": "average_veloc_2nd_phase"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_DGM_I","name": "cycle_counter_DGM_total"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_DGM_Ireal","name": "cycle_counter_DGM_total_real"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_BAD_I","name": "BAD_cycle_counter_reject"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_CHK_I","name": "CHK_cycle_counter_reject"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_OK_I","name": "OK_cycle_counter_good_cast"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_OUT_I","name": "OUT_cycle_counter_reject"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_PS_I","name": "PS_cycle_counter_prod_start"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_TOT","name": "TOT_cycle_counter_total_Soll"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRprocess.ZR_SUMCYC_JOB_TOT_I","name": "TOT_cycle_counter_total"},{"node": "ns=2;s=Buhler-OPC.D021.APPL.zr_zaehler.svZRstates.ZRIO","name": "svZRstates"}]}'
      - '{"3": [{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PEAK_PRESSURE_AUTO_SCRAP","name":"PeakPressure_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.SLOW_SHOT_VELOCITY_AUTO_SCRAP","name":"SlowShotVelocity_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.TEMPERATURE_AUTO_SCRAP","name":"Temperature_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PEAK_VELOCITY_AUTO_SCRAP","name":"PeakVelocity_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.SQUEEZE_DISTANCE_AUTO_SCRAP","name":"SqueezDistance_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.TOTAL_SHOT_STROKE_AUTO_SCRAP","name":"TotalShotStroke_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.FAST_SHOT_START_POSITION_AUTO_SCRAP","name":"FastShotStartPosition_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.INTENSIFICATION_DELAY_TIME_AUTO_SCRAP","name":"IntensificationDelayTime_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PRESSURE_AT_FS_AUTO_SCRAP","name":"PressureAtFs_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.BISCUIT_AUTO_SCRAP","name":"BiscuitLength_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PEAK_PRESSURE_LSL","name":"PeakPressure_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.SLOW_SHOT_VELOCITY_LSL","name":"SlowShotVelocity_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.TEMPERATURE_LSL","name":"Temperature_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PEAK_VELOCITY_LSL","name":"PeakVelocity_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.SQUEEZE_DISTANCE_LSL","name":"SqueezDistance_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.TOTAL_SHOT_STROKE","name":"TotalShotStroke"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.FAST_SHOT_START_POSITION_LSL","name":"FastShotStartPosition_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.INTENSIFICATION_DELAY_TIME_LSL","name":"IntensificationDelayTime_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PRESSURE_AT_FS_LSL","name":"PressureAtFs_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.BISCUIT_LENGTH_LSL","name":"BiscuitLength_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PEAK_PRESSURE","name":"PeakPressure"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.SLOW_SHOT_VELOCITY","name":"SlowShotVelocity"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.TEMPERATURE","name":"Temperature"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PEAK_VELOCITY","name":"PeakVelocity"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.SQUEEZE_DISTANCE","name":"SqueezDistance"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.TOTAL_SHOT_STROKE_LSL","name":"TotalShotStroke_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.FAST_SHOT_START_POSITION","name":"FastShotStartPosition"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.INTENSIFICATION_DELAY_TIME","name":"IntensificationDelayTime"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PRESSURE_AT_FS","name":"PressureAtFs"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.BISCUIT_LENGTH","name":"BiscuitLength"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PEAK_PRESSURE_USL","name":"PeakPressure_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.SLOW_SHOT_VELOCITY_USL","name":"SlowShotVelocity_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.TEMPERATURE_USL","name":"Temperature_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PEAK_VELOCITY_USL","name":"PeakVelocity_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.SQUEEZE_DISTANCE_USL","name":"SqueezDistance_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.TOTAL_SHOT_STROKE_USL","name":"TotalShotStroke_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.FAST_SHOT_START_POSITION_USL","name":"FastShotStartPosition_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.INTENSIFICATION_DELAY_TIME_USL","name":"IntensificationDelayTime_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.PRESSURE_AT_FS_USL","name":"PressureAtFs_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.BISCUIT_LENGTH_USL","name":"BiscuitLength_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.CYCLE_TIME","name":"cycleTime"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Auto_scrap","name":"autoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Auto_Scrap_Reason","name":"autoScrapReason"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Slow_Shot_Velocity","name":"averageSlowShotVelocity"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Slow_Shot_Velocity_LSL","name":"averageSlowShotVelocity_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Slow_Shot_Velocity_USL","name":"averageSlowShotVelocity_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Slow_Shot_Velocity_Auto_Scrap","name":"averageSlowShotVelocity_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Jog_Velocity","name":"averageJogVelocity"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Jog_Velocity_LSL","name":"averageJogVelocity_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Jog_Velocity_USL","name":"averageJogVelocity_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Jog_Velocity_Auto_Scrap","name":"averageJogVelocity_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Fast_Shot_Velocity","name":"averageFastShotVelocity"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Fast_Shot_Velocity_LSL","name":"averageFastShotVelocity_LSL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Fast_Shot_Velocity_USL","name":"averageFastShotVelocity_USL"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Average_Fast_Shot_Velocity_Auto_Scrap","name":"averageFastShotVelocity_AutoScrap"},{"node":"ns=2;s=TwinCat.AFP-DC1.D010.Shot_Counter","name":"Shot_Counter"}]}'
pipeline:
  processors:
    - bloblang: |
        root = meta("Message").parse_json()
        root.value = this
        root.timestamp_ms = (timestamp_unix_nano() / 1000000).floor()
        root.trigger = meta("opcua_path")
        root.group = meta("group")
        root.db = meta("db")
        root.historian = meta("historian")
        root.sqlSp = meta("sqlSp")

        let one = "%s%s='%s'".format("@", "group", meta("group"))
        let two = "%s%s=%s".format("@", "timestamp_ms", root.timestamp_ms.string())
        let three = "%s%s=%s".format("@", "value", root.value)
        let four = "%s%s='%s'".format("@", "Machine", meta("group"))
        let gmeta = "%s, %s, %s, %s".format($one,$two,$three,$four)
        meta spq = "exec " + meta("sqlSp")+ " " + jsontosp(meta("Message")) + $gmeta
        root.query = "exec " + meta("sqlSp")+ " " + jsontosp(meta("Message")) + $gmeta
output:
  broker:
    pattern: fan_out
    outputs:
      - mqtt:
          urls:
            - tcp://10.0.0.56:1883
          topic: UMH/V1/AFP/DCM/${! meta("group") }/trigger/${! meta("opcua_path") }
          user: "user1"
          password: "9jrKxe6u548LIKpl"
          client_id: "afp-trigger"
      - sql_raw:
          driver: "mssql" # No default (required)
          dsn: "sqlserver://rcmmes:rcmmes384@10.0.0.18:1433?database=AFp_MES_DB"
          query: ${!meta("spq")}
          unsafe_dynamic_query: true
      - influxdb:
          endpoint: http://10.2.0.6:8086
          username: admin
          password: admin123
          token: BSNnByRccLkjEULGg1aA78tO0uGgwk2uJLz6EUlw1qh5uIFG9jmkDV8dW6tPQQExiVIITNDlpywJ8HoWEgLbuQ==
          org: RCM
          bucket: UMH_V1_AFP_DCM_trigger
          precision: ns